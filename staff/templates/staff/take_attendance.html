{% extends 'dashboard_base.html' %}

{% block title %}Take Attendance â€” SMS{% endblock %}

{% block header_title %}Take Attendance{% endblock %}
{% block user_role %}Staff{% endblock %}

{% block sidebar_nav %}
<a href="{% url 'staff:dashboard' %}" class="nav-item">
    <i class="fas fa-th-large"></i> Dashboard
</a>
<a href="{% url 'staff:timetable' %}" class="nav-item">
    <i class="fas fa-clock"></i> My Timetable
</a>
<a href="{% url 'staff:select_attendance_class' %}" class="nav-item active">
    <i class="fas fa-clipboard-check"></i> Take Attendance
</a>
<a href="{% url 'staff:assign_homework' %}" class="nav-item">
    <i class="fas fa-book-open"></i> Assign Homework
</a>
<a href="{% url 'staff:select_exam' %}" class="nav-item">
    <i class="fas fa-pen-fancy"></i> Enter Marks
</a>
<div class="nav-label">Personal</div>
<a href="{% url 'staff:apply_leave' %}" class="nav-item">
    <i class="fas fa-calendar-minus"></i> Apply Leave
</a>
<a href="{% url 'staff:view_salary' %}" class="nav-item">
    <i class="fas fa-wallet"></i> Salary Slips
</a>
{% endblock %}

{% block dashboard_content %}
<div class="content-card animate-in">
    <div class="content-card-header">
        <h3><i class="fas fa-clipboard-check" style="color: var(--primary); margin-right: 8px;"></i>Attendance: {{
            class.name }} - {{ class.section }}</h3>
    </div>
    <div class="content-card-body">
        <form method="post">
            {% csrf_token %}
            <div style="margin-bottom: 20px;">
                <label
                    style="display: block; font-size: 13px; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px;">Date</label>
                <input type="date" name="date" required value="{% now 'Y-m-d' %}" class="form-input">
            </div>

            <div style="overflow-x: auto;">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Attendance</th>
                            <th>Remarks</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for student in students %}
                        <tr>
                            <td style="font-weight: 600;">
                                {{ student.user.first_name }} {{ student.user.last_name }}
                                <span style="color: var(--text-secondary); font-size: 12px;">({{
                                    student.admission_number }})</span>
                            </td>
                            <td>
                                <select name="status_{{ student.id }}" class="form-input" style="min-width: 120px;">
                                    <option value="PRESENT">Present</option>
                                    <option value="ABSENT">Absent</option>
                                    <option value="LATE">Late</option>
                                    <option value="EXCUSED">Excused</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" name="remarks_{{ student.id }}" placeholder="Optional"
                                    class="form-input">
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                <button type="submit" class="sidebar-create-btn" style="display: inline-flex; gap: 8px;">
                    <i class="fas fa-save"></i> Save Attendance
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}